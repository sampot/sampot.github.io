
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="我是山姆鍋">
    <title>去中心化身份驗證與訊息傳遞 - 我是山姆鍋</title>
    <meta name="author" content="Sampot (山姆鍋)">
    
    
        <link rel="icon" href="https://samkuo.me/images/favicon.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sampot (山姆鍋)","sameAs":["https://github.com/sampot","https://twitter.com/sampotkuo","https://facebook.com/sampotkuo","https://tw.linkedin.com/in/sampot","https://developers.tw/@山姆鍋","/sitemap/"],"image":"logo.png"},"articleBody":"山姆鍋期望雲端存儲與備份服務，可以做到保護使用者的資料安全與隱私。針對要達到這樣目標， 已經說明了其中需要的兩個關鍵技術：「資訊擴散演算法」以及「Convergent Encryption」。 本文山姆鍋說明另外一片重要拼圖：「去中心化身份驗證 (decentralized authentication)」。\n\n在描述雲端儲存與備份服務時，山姆鍋提到理想的服務需要有下列三點特性：\n\n不用怕儲存主機被入侵；\n不用擔心服務供應商將儲存資料交給第三方；\n全世界只有您能夠讀取資料內容；\n\n本文與之前文章討論的技術可以完成上述特性。為了確保第 3 點，我們要能夠回答下列問題：\n\n資料存取的請求者的身份。\n資料存取的請求者是否具備需要的權限。\n\n由於假設需求是只有自己能夠讀取資料內容，所以資料擁有者應該是唯一合法的請求者。 既然是擁有者，理應擁有所有權限。所以，本文重點旨在說明如何以一個去中心化方法來驗證使用者身份， 以及如何確保只有擁有者能夠解密資料。\n為什麼需要去中心化的驗證方法？\n這個問題其實反映我們的目的：只有擁有者可以存取資料。基於這個需求， 最安全的做法自然是不存放任何身份驗證資訊在雲端主機。而要做到這點唯有去中心化的架構可以實現。 在說明山姆鍋建議的驗證方法前，先看看目前網路上有哪些常見的身份驗證方法。\n常見的身份驗證方法\n目前網路上常用的使用者身份驗證方法，大略有下列三種方式 (資料來源參考 Wikipedia)：\n\n\n\n共享秘鑰的驗證方式:\n 這應該是大多數人熟悉的方式，使用者被要求輸入登入名稱以及密碼，如果名稱與密碼組合正確， 則登入成功。為了實現這種方法，服務端需要存放使用者的身份認證資訊，例如：經過雜湊並加料過的密碼 [1]。 這種方法的主要缺點在於集中存放使用者身份驗證資料，一旦被入侵，使用者的個人資料， 以及身份驗證資訊可能都會遭受破解 (compromised)。這還是網路服務廠商有提供保護措施的情況，如果沒有，那簡直就可以說是長驅直入！\n\n\n\n\n多因子驗證 (Multi-factor authentication) 方法:\n 通常是第一種方法，再加上一個額外的驗證機制。例如：Google 會以簡訊傳送額外的認證碼， 在登入的第二步驟使用。另一種常見的方式是使用硬體或軟體 Token，用來產生一次性認證碼。 由於使用額外的認證機制，在服務端安全的情況下，使用者身份比第一種方法更不容易被盜用。 這種方法主要是要補強使用者的密碼強度不夠或被盜錄的問題。\n\n\n\n\n公開金鑰驗證方法：\n透過使用憑證 (certificate) 來證明服務端 (server) 或者客戶端 (client) 的身份。 憑證使用公開金鑰密碼，如早期的 DSA , RSA ，以及最近的 Elliptic Curve (以下簡稱 EC ) 演算法。 這種方法的主要缺點在於憑證需要預先經過第三方簽核 (signed)，憑證的派送、取消與重發需要完整的基礎設施。\n\n\n\n第一跟第二種方法，使用者身份驗證資訊都存放在服務端，大量的用戶資訊永遠都是駭客的潛在目標。 第三種方法雖然相對安全許多，但是憑證的管理負擔以及發行憑證掌握在少數組織的手中， 只要其中的發行憑證被破解，由那個發行憑證所簽核的憑證都可以被捏造。這是已經有實際發生的案例。\n針對雲端存儲與備份服務，實在沒有必要存放使用者的身份資料在服務端，使用公開金鑰方法又有憑證管理複雜的問題。 有沒有適合雲端存儲服務的身份驗證方法呢？實現這種方法的需求是什麼？\n身份驗證方法需求\n針對雲端存儲服務，基於服務端沒有存放個人資料的需求，需要一種不同的驗證方法。 這種驗證方法最好能夠具有下列特性：\n\n\n\n身份驗證資訊少:\n 最好服務端只需要一個代表使用者身份的唯一代碼 (unique ID)，這個代碼沒有任何語意資訊。\n實務上，這個代碼可能是由其它代碼衍生 (derived) 而來，不過只要基本上不能從此代碼反推出來源代碼即可。 這可以透過使用密碼學等級的雜湊函式達成。\n\n\n\n\n易於理解與實現：\n因為去中心化的架構，客戶端需要負擔身份認證的運算工作。因此，這種方法要易於理解並實現才能在不同的客戶端實作。\n\n\n\n\n可匿名：\n這種方法最好可以匿名方式進行，也就是身份驗證不需要使用者揭露個人資訊 (personal information)。 這裡的個人資訊是指能夠識別 (identify) 到單一使用者身份的資料，如：姓名、Email 等等。 但對於像是 IP 位址這種可以間接推測個人身份的資訊則需由其他機制處理。\n\n\n\n\n去中心化：\n任兩個參與者，可以互相驗證彼此身份，不用跟第三方預先註冊。\n\n\n\n清楚身份驗證方法的需求後，來看看如何設計符合的身份驗證方法。\n身份驗證方法設計\n本節有點難以說明，您可以跳過，只須記住這個設計確保：\n\n任何人都可以接受到送出的訊息，但只有合法接收者能夠解開訊息。\n驗證訊息的確是來自發送者，且傳輸過程中沒有遭到任何修改。\n\n目前技術要做去中心化的驗證，基本上跳脫不出公開金鑰密碼學的方法。山姆鍋建議的驗證方法使用以 Elliptic curve 公開金鑰為基礎，相較於 DSA/RSA，Elliptic curve 有下列優點：\n\n同樣密碼強度，EC 的位元長度 (bit length) 較短，且需要的運算能力較低。\n可以直接使用 EC 的公鑰 (public key) 當作身份識別碼，或者由它再衍生另一個代碼。熟悉 Bitcoin 運作原理的讀者，應該會覺得跟 Bitcoin 的方法很類似。\n\n要了解本文所提的驗證方式，需要先知道 EC 的一些特性：\n\n\n跟 RSA 一樣，EC 同樣使用金鑰對 (key pair)，分別為公鑰 (public key) 以及私鑰 (secret key)。\n\n\n\n任意兩個金鑰對，A 跟 B，可以且只可以由 Ａ的私鑰與 B 的公鑰或者 B 的私鑰與 A 的公鑰 [2] ，衍生出相同的金鑰 (key)。\n這個特性可以用來簡單完成金鑰交換協定。雖然 EC 比 RSA 的運算需求低，但相對於對稱式加密還是比較慢。 所以，通常還是藉由金鑰交換協定來協商一個金鑰並使用於對稱式加密。\n\n\n\n\nEC 建議使用不同的金鑰對作為簽核 (signing) 用的以及負責加密 (encryption) 用途。\n針對不同用途，基於安全性原則使用不同的金鑰對。理論上，一個 EC 金鑰對可以在這兩種用途之間轉換， 雖然目前沒有證據顯示這樣做比較不安全，但一般還是分開比較常見。\n\n\n\n本文所建議的方法是參考 CurveCP 的設計。\n假設 Alice 想要送一段訊息 (message) 給 Bob，Alice 的長期金鑰對為 (s, p), Bob 的長期金鑰對 為 (s’, p’)，且假設 Alice 已經透過某種安全管道得知 Bob 的長期公鑰 (long-term public key)。\n\n\nAlice 產生一個臨時加密金鑰對 (S, P)，使用臨時私鑰 S 以及 Bob 的長期公鑰 p’ 衍生加密用的金鑰 K2。\n\n\nAlice 使用自己的長期私鑰 s 跟 Bob 的長期公鑰 p’ 衍生加密用金鑰 K1。\n\n\n\nAlice 使用 K1 將要傳送的資料 (payload) 加密，連同自己的長期公鑰 p 一起組成資料區塊 D1。\n\nD1 的資料組成：\n\n\n\n\n\n\n\n\n\n\nAlice 的長期公鑰\n…\nK1 加密過的\n\n\n p\n\npayload\n\n\n\n\n\n\n\n\nAlice 使用 K2 加密 D1，得到另一個加密過的資料區段 D2, 連同臨時公鑰 P 一起傳給 Bob。\n\nAlice 傳出去的資料：\n\n\n\n\n\n\n\n\n\n\n臨時公鑰 P\n…\nD2\n\n\n\n\n\n\n\nBob 根據收到的的臨時公鑰 P 以及自己的長期私鑰 s’，衍生加密用的金鑰 K2。\n\n\nBob 使用金鑰 K2 解密接收到的資料區段 D2。\n\n\nBob 使用從 D2 解密取得的 Alice 長期公鑰 p, 與自己的長期私鑰 s’ 衍生出 K1。\n\n\nBob 使用 K1 解密 D1 取得 Alice 所傳送的資料 (payload)，同時驗證此訊息確實來自 Alice。\n\n\n使用臨時金鑰對是為了避免 Alice 的長期公鑰暴露給第三方，長期公鑰一般不視為極機密的資訊， 但避免不必要的傳輸減少被破解的資訊可以提高安全性。 為了簡化起見，山姆鍋將流程中需要傳輸的時間郵戳 (timestamp), padding 用的資料都忽略不提， 這些資訊用來處理像是過期訊息等問題。 有了這樣的安全訊息傳遞方式，我們就可以來看看跟雲端資料存儲服務如何整合。\n與雲端資料存儲服務的整合\n為了說明為何去中心化的身份驗證是雲端資料存儲服務重要的關鍵技術，花了不少文字描述。不管如何， 終於要說明這種去中心化身份驗證方法如何應用在雲端資料存儲服務。在 Dropbox 做到資料加密又避免重複儲存的秘密 中，最終安全的保障來自於解密的主鑰 (master key) 的安全，但是目前的雲端服務需要將 master key 儲存在雲端主機中，終究是一個安全隱憂。\n如果雲端儲存服務是按照山姆鍋所建議的方式，使用 Convergent encryption 來加密，整個資料倉庫 (repository) 最終只需要保護使用者資料索引區塊。這個區塊在雲端主機隨時是加密狀態， 只有在使用者要存取時才會從服務端下載到客戶端，資料有修改的情況下，由客戶端加密後再回傳雲端主機。 透過本文所描述的身份驗證與 EC，由於加密主鑰只存在客戶端， 可以確保只有擁有者可以存取以及解密資料 [3] 。\n結語\n有了這樣一個去中心化，易於理解與實現的身份驗證方法，除了雲端資料備份，也開啟很多種應用的可能。 本文沒有詳細說明如何在客戶端保護好主要的解密金鑰 (master key)，概念上可以使用類似 Bitcoin 腦錢包 (brain wallet) 的方法，主要解密金鑰衍生自使用者才知道的密語 (pass phrase)，所以，雲端資料安全最終的問題轉變成： 如何保護使用者的密語，這個目前山姆鍋不清楚有沒有更簡單又安全的做法。\n免責聲明：山姆鍋不是資料安全方面專家，不保證所描述方法的任何安全性。歡迎有這方面專長的人提出改進建議。\n參考資料\nNaCL: http://nacl.cr.yp.to/\n\n基於 EC 密碼學的加解密程式庫。\n\nlibsodium: https://github.com/jedisct1/libsodium\n\nLibsodium 是一個現代化的 NaCL 加解密程式庫的實作。\n\nlibnacl: https://libnacl.readthedocs.org/en/latest/\n\n一個 Python 的 NaCL 程式庫綁定，可以使用 Libsodium 程式庫。\n\nCurveCP: http://curvecp.org/\n\n基於 NaCL 的安全資料通訊協定。\n\nBitMessage: https://bitmessage.org/wiki/Main_Page\n\n基於 Elliptic Curve 密碼學，採用點對點 (P2P) 架構，匿名的訊息傳遞程式。\n\nRSA: https://en.wikipedia.org/wiki/RSA_(cryptosystem)\nDSA: https://en.wikipedia.org/wiki/Digital_Signature_Algorithm\nEC: https://en.wikipedia.org/wiki/Elliptic_curve_cryptography\n\n\n\n 指密碼使用密碼學等級 (cryptographic) 的雜湊函式以及一個亂數 (稱為 salt) 一起計算出密碼雜湊值 (password hash)，驗證時使用相同的演算法與亂數，如果匹配則視為認證成功。 ↩︎\n\n這裡的 “只可以” 純粹是從數學的角度來說。因為數學上幾乎不可能猜測出衍生的金鑰。 ↩︎\n\n其實擁有者可以將解密的能力委派給第三方，因為資料採用 Convergent encryption， 只要有金鑰跟加密過的資料，任何人都可以解密。但前提應該只有在擁有者主動提供解密用的金鑰的條件下。 這個特性是實現檔案共享必要的機制。 ↩︎\n\n\n\n","dateCreated":"2015-09-18T08:45:00+08:00","dateModified":"2020-03-08T10:24:13+08:00","datePublished":"2015-09-18T08:45:00+08:00","description":"山姆鍋期望雲端存儲與備份服務，可以做到保護使用者的資料安全與隱私。針對要達到這樣目標， 已經說明了其中需要的兩個關鍵技術：「資訊擴散演算法」以及「Convergent Encryption」。 本文山姆鍋說明另外一片重要拼圖：「去中心化身份驗證 (decentralized authentication)」。","headline":"去中心化身份驗證與訊息傳遞","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"},"publisher":{"@type":"Organization","name":"Sampot (山姆鍋)","sameAs":["https://github.com/sampot","https://twitter.com/sampotkuo","https://facebook.com/sampotkuo","https://tw.linkedin.com/in/sampot","https://developers.tw/@山姆鍋","/sitemap/"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/","keywords":"nacl, encryption, security, authentication, messaging"}</script>
    <meta name="description" content="山姆鍋期望雲端存儲與備份服務，可以做到保護使用者的資料安全與隱私。針對要達到這樣目標， 已經說明了其中需要的兩個關鍵技術：「資訊擴散演算法」以及「Convergent Encryption」。 本文山姆鍋說明另外一片重要拼圖：「去中心化身份驗證 (decentralized authentication)」。">
<meta property="og:type" content="blog">
<meta property="og:title" content="去中心化身份驗證與訊息傳遞">
<meta property="og:url" content="https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/">
<meta property="og:site_name" content="我是山姆鍋">
<meta property="og:description" content="山姆鍋期望雲端存儲與備份服務，可以做到保護使用者的資料安全與隱私。針對要達到這樣目標， 已經說明了其中需要的兩個關鍵技術：「資訊擴散演算法」以及「Convergent Encryption」。 本文山姆鍋說明另外一片重要拼圖：「去中心化身份驗證 (decentralized authentication)」。">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2015-09-18T00:45:00.000Z">
<meta property="article:modified_time" content="2020-03-08T02:24:13.179Z">
<meta property="article:author" content="Sampot (山姆鍋)">
<meta property="article:tag" content="nacl">
<meta property="article:tag" content="encryption">
<meta property="article:tag" content="security">
<meta property="article:tag" content="authentication">
<meta property="article:tag" content="messaging">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@sampotkuo">
<meta property="fb:app_id" content="109832189371155">
    
    
        
    
    <meta property="og:image" content="https://samkuo.me/images/featured_image.jpg"/>
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-qlm634aeqqh4pedhidwvikqi59e0o7qckfid1geequyx9cyxw5rqjplgvt1t.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41152700-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-41152700-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
        <img class="header-avatar-picture" src="/images/logo32.png" alt="作者的圖片" />
            我是山姆鍋
        </a>
    </div>
    
        
            <a
                class="header-right-icon open-algolia-search"
                href="#search"
                aria-label="打開鏈接: /#search"
            >
        
        
            <i class="fa fa-search fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/images/logo.png" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Sampot (山姆鍋)</h4>
                
                    <h5 class="sidebar-profile-bio"><p>個人部落格， 記錄與分享一些軟體開發與運維相關資訊， 偶爾也會碎念一下</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about/"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/sampot"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/sampotkuo"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/sampotkuo"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://tw.linkedin.com/in/sampot"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://developers.tw/@山姆鍋"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="聯絡"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">聯絡</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/sitemap/"
                            
                            rel="noopener"
                            title="網站導覽"
                        >
                        <i class="sidebar-button-icon fa fa-sitemap" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">網站導覽</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            去中心化身份驗證與訊息傳遞
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-09-18T08:45:00+08:00">
	
		    9月 18, 2015
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/category/software-development/">Software Development</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <div class="alert info no-icon">
                <a href="https://www.facebook.com/sampotkuo" target="_blank" rel="noopener">「我是山姆鍋」有臉書專頁</a>
            </div>

            <p>山姆鍋期望雲端存儲與備份服務，可以做到保護使用者的資料安全與隱私。針對要達到這樣目標， 已經說明了其中需要的兩個關鍵技術：「資訊擴散演算法」以及「Convergent Encryption」。 本文山姆鍋說明另外一片重要拼圖：「去中心化身份驗證 (decentralized authentication)」。</p>
<a id="more"></a>
<p>在描述雲端儲存與備份服務時，山姆鍋提到理想的服務需要有下列三點特性：</p>
<ol>
<li>不用怕儲存主機被入侵；</li>
<li>不用擔心服務供應商將儲存資料交給第三方；</li>
<li>全世界只有您能夠讀取資料內容；</li>
</ol>
<p>本文與之前文章討論的技術可以完成上述特性。為了確保第 3 點，我們要能夠回答下列問題：</p>
<ol>
<li>資料存取的請求者的身份。</li>
<li>資料存取的請求者是否具備需要的權限。</li>
</ol>
<p>由於假設需求是只有自己能夠讀取資料內容，所以資料擁有者應該是唯一合法的請求者。 既然是擁有者，理應擁有所有權限。所以，本文重點旨在說明如何以一個去中心化方法來驗證使用者身份， 以及如何確保只有擁有者能夠解密資料。</p>
<h2 id="為什麼需要去中心化的驗證方法？">為什麼需要去中心化的驗證方法？</h2>
<p>這個問題其實反映我們的目的：只有擁有者可以存取資料。基於這個需求， 最安全的做法自然是不存放任何身份驗證資訊在雲端主機。而要做到這點唯有去中心化的架構可以實現。 在說明山姆鍋建議的驗證方法前，先看看目前網路上有哪些常見的身份驗證方法。</p>
<h2 id="常見的身份驗證方法">常見的身份驗證方法</h2>
<p>目前網路上常用的使用者身份驗證方法，大略有下列三種方式 (資料來源參考 Wikipedia)：</p>
<ol>
<li>
<dl>
<dt>共享秘鑰的驗證方式:</dt>
<dd> 這應該是大多數人熟悉的方式，使用者被要求輸入登入名稱以及密碼，如果名稱與密碼組合正確， 則登入成功。為了實現這種方法，服務端需要存放使用者的身份認證資訊，例如：經過雜湊並加料過的密碼 <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。 這種方法的主要缺點在於集中存放使用者身份驗證資料，一旦被入侵，使用者的個人資料， 以及身份驗證資訊可能都會遭受破解 (compromised)。這還是網路服務廠商有提供保護措施的情況，如果沒有，那簡直就可以說是長驅直入！</dd>
</dl>
</li>
<li>
<dl>
<dt>多因子驗證 (Multi-factor authentication) 方法:</dt>
<dd> 通常是第一種方法，再加上一個額外的驗證機制。例如：Google 會以簡訊傳送額外的認證碼， 在登入的第二步驟使用。另一種常見的方式是使用硬體或軟體 Token，用來產生一次性認證碼。 由於使用額外的認證機制，在服務端安全的情況下，使用者身份比第一種方法更不容易被盜用。 這種方法主要是要補強使用者的密碼強度不夠或被盜錄的問題。</dd>
</dl>
</li>
<li>
<dl>
<dt>公開金鑰驗證方法：</dt>
<dd>透過使用憑證 (certificate) 來證明服務端 (server) 或者客戶端 (client) 的身份。 憑證使用公開金鑰密碼，如早期的 <a href="#DSA">DSA</a> , <a href="#RSA">RSA</a> ，以及最近的 Elliptic Curve (以下簡稱 <a href="#EC">EC</a> ) 演算法。 這種方法的主要缺點在於憑證需要預先經過第三方簽核 (signed)，憑證的派送、取消與重發需要完整的基礎設施。</dd>
</dl>
</li>
</ol>
<p>第一跟第二種方法，使用者身份驗證資訊都存放在服務端，大量的用戶資訊永遠都是駭客的潛在目標。 第三種方法雖然相對安全許多，但是憑證的管理負擔以及發行憑證掌握在少數組織的手中， 只要其中的發行憑證被破解，由那個發行憑證所簽核的憑證都可以被捏造。這是已經有實際發生的案例。</p>
<p>針對雲端存儲與備份服務，實在沒有必要存放使用者的身份資料在服務端，使用公開金鑰方法又有憑證管理複雜的問題。 有沒有適合雲端存儲服務的身份驗證方法呢？實現這種方法的需求是什麼？</p>
<h2 id="身份驗證方法需求">身份驗證方法需求</h2>
<p>針對雲端存儲服務，基於服務端沒有存放個人資料的需求，需要一種不同的驗證方法。 這種驗證方法最好能夠具有下列特性：</p>
<ol>
<li>
<dl>
<dt>身份驗證資訊少:</dt>
<dd> 最好服務端只需要一個代表使用者身份的唯一代碼 (unique ID)，這個代碼沒有任何語意資訊。<br>
實務上，這個代碼可能是由其它代碼衍生 (derived) 而來，不過只要基本上不能從此代碼反推出來源代碼即可。 這可以透過使用密碼學等級的雜湊函式達成。</dd>
</dl>
</li>
<li>
<dl>
<dt>易於理解與實現：</dt>
<dd>因為去中心化的架構，客戶端需要負擔身份認證的運算工作。因此，這種方法要易於理解並實現才能在不同的客戶端實作。</dd>
</dl>
</li>
<li>
<dl>
<dt>可匿名：</dt>
<dd>這種方法最好可以匿名方式進行，也就是身份驗證不需要使用者揭露個人資訊 (personal information)。 這裡的個人資訊是指能夠識別 (identify) 到單一使用者身份的資料，如：姓名、Email 等等。 但對於像是 IP 位址這種可以間接推測個人身份的資訊則需由其他機制處理。</dd>
</dl>
</li>
<li>
<dl>
<dt>去中心化：</dt>
<dd>任兩個參與者，可以互相驗證彼此身份，不用跟第三方預先註冊。</dd>
</dl>
</li>
</ol>
<p>清楚身份驗證方法的需求後，來看看如何設計符合的身份驗證方法。</p>
<h2 id="身份驗證方法設計">身份驗證方法設計</h2>
<p>本節有點難以說明，您可以跳過，只須記住這個設計確保：</p>
<ol>
<li>任何人都可以接受到送出的訊息，但只有合法接收者能夠解開訊息。</li>
<li>驗證訊息的確是來自發送者，且傳輸過程中沒有遭到任何修改。</li>
</ol>
<p>目前技術要做去中心化的驗證，基本上跳脫不出公開金鑰密碼學的方法。山姆鍋建議的驗證方法使用以 Elliptic curve 公開金鑰為基礎，相較於 DSA/RSA，Elliptic curve 有下列優點：</p>
<ol>
<li>同樣密碼強度，EC 的位元長度 (bit length) 較短，且需要的運算能力較低。</li>
<li>可以直接使用 EC 的公鑰 (public key) 當作身份識別碼，或者由它再衍生另一個代碼。熟悉 Bitcoin 運作原理的讀者，應該會覺得跟 Bitcoin 的方法很類似。</li>
</ol>
<p>要了解本文所提的驗證方式，需要先知道 EC 的一些特性：</p>
<ol>
<li>
<p>跟 RSA 一樣，EC 同樣使用金鑰對 (key pair)，分別為公鑰 (public key) 以及私鑰 (secret key)。</p>
</li>
<li>
<dl>
<dt>任意兩個金鑰對，A 跟 B，可以且只可以由 Ａ的私鑰與 B 的公鑰或者 B 的私鑰與 A 的公鑰 <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> ，衍生出相同的金鑰 (key)。</dt>
<dd>這個特性可以用來簡單完成金鑰交換協定。雖然 EC 比 RSA 的運算需求低，但相對於對稱式加密還是比較慢。 所以，通常還是藉由金鑰交換協定來協商一個金鑰並使用於對稱式加密。</dd>
</dl>
</li>
<li>
<dl>
<dt>EC 建議使用不同的金鑰對作為簽核 (signing) 用的以及負責加密 (encryption) 用途。</dt>
<dd>針對不同用途，基於安全性原則使用不同的金鑰對。理論上，一個 EC 金鑰對可以在這兩種用途之間轉換， 雖然目前沒有證據顯示這樣做比較不安全，但一般還是分開比較常見。</dd>
</dl>
</li>
</ol>
<p>本文所建議的方法是參考 <a href="#CurveCP">CurveCP</a> 的設計。</p>
<p>假設 Alice 想要送一段訊息 (message) 給 Bob，Alice 的長期金鑰對為 (s, p), Bob 的長期金鑰對 為 (s’, p’)，且假設 Alice 已經透過某種安全管道得知 Bob 的長期公鑰 (long-term public key)。</p>
<ol>
<li>
<p>Alice 產生一個臨時加密金鑰對 (S, P)，使用臨時私鑰 S 以及 Bob 的長期公鑰 p’ 衍生加密用的金鑰 K2。</p>
</li>
<li>
<p>Alice 使用自己的長期私鑰 s 跟 Bob 的長期公鑰 p’ 衍生加密用金鑰 K1。</p>
</li>
<li>
<dl>
<dt>Alice 使用 K1 將要傳送的資料 (payload) 加密，連同自己的長期公鑰 p 一起組成資料區塊 D1。</dt>
<dd>
<p>D1 的資料組成：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Alice 的長期公鑰</td>
<td>…</td>
<td>K1 加密過的</td>
</tr>
<tr>
<td> p</td>
<td></td>
<td>payload</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li>
<dl>
<dt>Alice 使用 K2 加密 D1，得到另一個加密過的資料區段 D2, 連同臨時公鑰 P 一起傳給 Bob。</dt>
<dd>
<p>Alice 傳出去的資料：</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>臨時公鑰 P</td>
<td>…</td>
<td>D2</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li>
<p>Bob 根據收到的的臨時公鑰 P 以及自己的長期私鑰 s’，衍生加密用的金鑰 K2。</p>
</li>
<li>
<p>Bob 使用金鑰 K2 解密接收到的資料區段 D2。</p>
</li>
<li>
<p>Bob 使用從 D2 解密取得的 Alice 長期公鑰 p, 與自己的長期私鑰 s’ 衍生出 K1。</p>
</li>
<li>
<p>Bob 使用 K1 解密 D1 取得 Alice 所傳送的資料 (payload)，同時驗證此訊息確實來自 Alice。</p>
</li>
</ol>
<p>使用臨時金鑰對是為了避免 Alice 的長期公鑰暴露給第三方，長期公鑰一般不視為極機密的資訊， 但避免不必要的傳輸減少被破解的資訊可以提高安全性。 為了簡化起見，山姆鍋將流程中需要傳輸的時間郵戳 (timestamp), padding 用的資料都忽略不提， 這些資訊用來處理像是過期訊息等問題。 有了這樣的安全訊息傳遞方式，我們就可以來看看跟雲端資料存儲服務如何整合。</p>
<h2 id="與雲端資料存儲服務的整合">與雲端資料存儲服務的整合</h2>
<p>為了說明為何去中心化的身份驗證是雲端資料存儲服務重要的關鍵技術，花了不少文字描述。不管如何， 終於要說明這種去中心化身份驗證方法如何應用在雲端資料存儲服務。在 <a href="/post/2015/09/how-dropbox-encrypt-data-with-convergent-encryption/">Dropbox 做到資料加密又避免重複儲存的秘密</a> 中，最終安全的保障來自於解密的主鑰 (master key) 的安全，但是目前的雲端服務需要將 master key 儲存在雲端主機中，終究是一個安全隱憂。</p>
<p>如果雲端儲存服務是按照山姆鍋所建議的方式，使用 Convergent encryption 來加密，整個資料倉庫 (repository) 最終只需要保護使用者資料索引區塊。這個區塊在雲端主機隨時是加密狀態， 只有在使用者要存取時才會從服務端下載到客戶端，資料有修改的情況下，由客戶端加密後再回傳雲端主機。 透過本文所描述的身份驗證與 EC，由於加密主鑰只存在客戶端， 可以確保只有擁有者可以存取以及解密資料 <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> 。</p>
<h2 id="結語">結語</h2>
<p>有了這樣一個去中心化，易於理解與實現的身份驗證方法，除了雲端資料備份，也開啟很多種應用的可能。 本文沒有詳細說明如何在客戶端保護好主要的解密金鑰 (master key)，概念上可以使用類似 Bitcoin 腦錢包 (brain wallet) 的方法，主要解密金鑰衍生自使用者才知道的密語 (pass phrase)，所以，雲端資料安全最終的問題轉變成： 如何保護使用者的密語，這個目前山姆鍋不清楚有沒有更簡單又安全的做法。</p>
<p><strong>免責聲明</strong>：山姆鍋不是資料安全方面專家，不保證所描述方法的任何安全性。歡迎有這方面專長的人提出改進建議。</p>
<h2 id="參考資料">參考資料</h2>
<p><em>NaCL</em>: <a href="http://nacl.cr.yp.to/" target="_blank" rel="noopener">http://nacl.cr.yp.to/</a></p>
<blockquote>
<p>基於 EC 密碼學的加解密程式庫。</p>
</blockquote>
<p><em>libsodium</em>: <a href="https://github.com/jedisct1/libsodium" target="_blank" rel="noopener">https://github.com/jedisct1/libsodium</a></p>
<blockquote>
<p>Libsodium 是一個現代化的 NaCL 加解密程式庫的實作。</p>
</blockquote>
<p><em>libnacl</em>: <a href="https://libnacl.readthedocs.org/en/latest/" target="_blank" rel="noopener">https://libnacl.readthedocs.org/en/latest/</a></p>
<blockquote>
<p>一個 Python 的 NaCL 程式庫綁定，可以使用 Libsodium 程式庫。</p>
</blockquote>
<p><a name="CurveCP"></a><em>CurveCP</em>: <a href="http://curvecp.org/" target="_blank" rel="noopener">http://curvecp.org/</a></p>
<blockquote>
<p>基於 NaCL 的安全資料通訊協定。</p>
</blockquote>
<p><em>BitMessage</em>: <a href="https://bitmessage.org/wiki/Main_Page" target="_blank" rel="noopener">https://bitmessage.org/wiki/Main_Page</a></p>
<blockquote>
<p>基於 Elliptic Curve 密碼學，採用點對點 (P2P) 架構，匿名的訊息傳遞程式。</p>
</blockquote>
<p><a name="RSA"></a><em>RSA</em>: <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/RSA_(cryptosystem)</a></p>
<p><a name="DSA"></a><em>DSA</em>: <a href="https://en.wikipedia.org/wiki/Digital_Signature_Algorithm" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Digital_Signature_Algorithm</a></p>
<p><a name="EC"></a><em>EC</em>: <a href="https://en.wikipedia.org/wiki/Elliptic_curve_cryptography" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Elliptic_curve_cryptography</a></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p> 指密碼使用密碼學等級 (cryptographic) 的雜湊函式以及一個亂數 (稱為 salt) 一起計算出密碼雜湊值 (password hash)，驗證時使用相同的演算法與亂數，如果匹配則視為認證成功。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>這裡的 “只可以” 純粹是從數學的角度來說。因為數學上幾乎不可能猜測出衍生的金鑰。 <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>其實擁有者可以將解密的能力委派給第三方，因為資料採用 Convergent encryption， 只要有金鑰跟加密過的資料，任何人都可以解密。但前提應該只有在擁有者主動提供解密用的金鑰的條件下。 這個特性是實現檔案共享必要的機制。 <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

            <div class="alert info no-icon">
                山姆鍋是<a href="https://developers.tw/@山姆鍋" target="_blank" rel="noopener">#呆丸開發者</a>成員
            </div>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">標籤</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tag/authentication/" rel="tag">authentication</a> <a class="tag tag--primary tag--small t-link" href="/tag/encryption/" rel="tag">encryption</a> <a class="tag tag--primary tag--small t-link" href="/tag/messaging/" rel="tag">messaging</a> <a class="tag tag--primary tag--small t-link" href="/tag/nacl/" rel="tag">nacl</a> <a class="tag tag--primary tag--small t-link" href="/tag/security/" rel="tag">security</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2015/09/why-use-database-as-queue/"
                    data-tooltip="為什麼使用資料庫當作訊息佇列不是問題？"
                    aria-label="上一篇: 為什麼使用資料庫當作訊息佇列不是問題？"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2015/09/python-rsync-hash-split/"
                    data-tooltip="一個有創意的檔案切割演算法"
                    aria-label="下一篇: 一個有創意的檔案切割演算法"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Sampot (山姆鍋). All Rights Reserved.
    </span>
    <br/>
        <a rel="license"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW"><img
                alt="創用 CC 授權條款" style="border-width:0"
                src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
        除另有標示，本著作係採用<a rel="license"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW">創用 CC
            姓名標示-非商業性-相同方式分享 4.0 國際 授權條款</a>授權。
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2015/09/why-use-database-as-queue/"
                    data-tooltip="為什麼使用資料庫當作訊息佇列不是問題？"
                    aria-label="上一篇: 為什麼使用資料庫當作訊息佇列不是問題？"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2015/09/python-rsync-hash-split/"
                    data-tooltip="一個有創意的檔案切割演算法"
                    aria-label="下一篇: 一個有創意的檔案切割演算法"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/images/logo.png" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Sampot (山姆鍋)</h4>
        
            <div id="about-card-bio"><p>個人部落格， 記錄與分享一些軟體開發與運維相關資訊， 偶爾也會碎念一下</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>IT 自由工作者</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                台灣/台北
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="/assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/03/set-up-mysql-master-master-replication/"
                            aria-label=": 設定 MySQL Master-Master 複製"
                        >
                            <h3 class="media-heading">設定 MySQL Master-Master 複製</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年3月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>本文簡單說明如何設定兩台 MySQL server，讓它們彼此互相備份資料 (Master-master 模式)。雖然這樣的設定通常是支援高可用性 (high availability) 平台的一部分，但本文不包含如何完成其他 HA 的工作。設定兩台 MySQL 伺服器互相備份，主要目的就是要確認資料的安全性；同時也提高可用性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/use-pacemaker-two-node-ha-cluster/"
                            aria-label=": 使用 Pacemaker 建構雙節點叢集系統"
                        >
                            <h3 class="media-heading">使用 Pacemaker 建構雙節點叢集系統</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月6日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>想要達到系統高可用性 (high availability) 的需求，自然免不了需要採用現成的解決方案。本文說明如何利用 Pacemaker/heartbeat 來建構一個雙節點的從其系統。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/build-cluster-filesystem-with-glusterfs-ubuntu/"
                            aria-label=": 使用 GlusterFS 在 Ubuntu 上建構雙節點叢集檔案系統"
                        >
                            <h3 class="media-heading">使用 GlusterFS 在 Ubuntu 上建構雙節點叢集檔案系統</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>在網站的叢集系統中，除了資料庫需要讓各個伺服器存取外，常常也會需要讓檔案 (圖檔，CSS 等等) 可以被叢集中的伺服器存取。 傳統上，常常使用 NFS 伺服器來達到此目的，但 NFS 本身往往成為單一失敗點 (single point of failure)。 本文介紹 GlusterFS 來建構一個簡單的雙節點叢集檔案系統，具備高可用性、高擴充性等特性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/scale-wordpress-with-hyperdb/"
                            aria-label=": 使用 HyperDB 加強 WordPress 網站的資料庫擴充性"
                        >
                            <h3 class="media-heading">使用 HyperDB 加強 WordPress 網站的資料庫擴充性</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>對於流量高的 Wordpress 網站來說，資料庫往往是第一個出現的瓶頸。針對資料庫擴充性的問題，本文介紹 HyperDB 這個解決方案。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/create-lnmp-environment-with-nginx/"
                            aria-label=": 在 Linode 上使用 Nginx 架設 LNMP 環境"
                        >
                            <h3 class="media-heading">在 Linode 上使用 Nginx 架設 LNMP 環境</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月30日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Apache HTTPd 是很好的網站伺服器，但是對於 CPU 跟記憶體的要求較高，對於架設在 VPS 上面網站來說， 需要一個更輕量級的解決方案。越來越多人選擇使用 Nginx 架設網站，主要考量便是它的快速、穩定以及輕量的特性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/05/support-sending-mail-php-linux-vps-exim/"
                            aria-label=": Linux VPS PHP 網站可以發送信件"
                        >
                            <h3 class="media-heading">Linux VPS PHP 網站可以發送信件</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年5月8日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>PHP 架站軟體通常需要用到寄信功能，例如：通知站長有新的迴響需要審核。使用虛擬主機來架站的讀者一定會納悶：<br>
不管是 WordPress，Drupal 或者其他 PHP<br>
架站軟體不是都不用另外設定就可以寄信？為什麼需要特地提到這件事情。<br>
話說山姆鍋的主機採用的是 Linode VPS，很多事情都需要自己來，唉！<br>
如果您的網站主機跟山姆鍋一樣是 VPS 或者專屬伺服器，那這篇文章也許對您有幫助。<br>
由於不是要做為公司的郵件伺服器，山姆鍋希望除了讓 PHP 架站軟體送信外，不再作其它用途。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/04/start-up/"
                            aria-label=": 影化身科技有限公司成立"
                        >
                            <h3 class="media-heading">影化身科技有限公司成立</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>2013 年 4 月 24 日，影化身科技有限公司登記成立，致力於提供雲端服務平台。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/shi-yong-octopresszuo-wei-bo-ke-ping-tai/"
                            aria-label=": 使用 Octopress 作為部落格平台"
                        >
                            <h3 class="media-heading">使用 Octopress 作為部落格平台</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>由於沒有需要太多動態功能，所以，嘗試使用靜態部落格平台 Octopress 來寫文章。「艾米部落」<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> 一路從 Joomla, Drupal, WordPress 到現在的 Octopress，也算是換了不少平台。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/use-static-site-generator-for-company-site/"
                            aria-label=": 使用靜態網頁產生器來管理公司網站"
                        >
                            <h3 class="media-heading">使用靜態網頁產生器來管理公司網站</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>對於不需要動態功能的網站而言，使用像是 Drupal、WordPress 之類的架站軟體，感覺有點大材小用。對於可以接受不使用「所見即所得」編輯器的人，靜態網站產生器應該是個可以接受的方案。 雖說是靜態網站，缺少很多功能，但像是公司或者行銷網站往往也不需要這些。況且， 靜態網站有諸多動態網站所沒有的功能，如：</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/exchange-name-card-with-eavatar-me/"
                            aria-label=": 如何利用「我．影化身」服務交換名片"
                        >
                            <h3 class="media-heading">如何利用「我．影化身」服務交換名片</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月29日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>今天從 MR JAMIE 上讀到一篇文章：「從今天開始，請 email 你的名片給我吧！」這讓我想到，與其使用 Email，使用「我．影化身」來代替，不是也很適當？</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 125 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-kkzt2vzfxsb5bych7gew3tzpzddvyjfn0sutkf3vixujdxhpjr4ifnekp3si.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://samkuo.me/post/2015/09/decentralzed-authenticationg-messaging-system/';
              
            this.page.identifier = 'post/2015/09/decentralzed-authenticationg-messaging-system/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'sampotkuo';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    



    
<script src="/assets/js/moment-with-locales.js"></script>

    
<script src="/assets/js/algoliasearch.js"></script>

    <script>
      var algoliaClient = algoliasearch('OIWK4CBFS4', 'f676051199368fe5f161c9012b7edaf6');
      var algoliaIndex = algoliaClient.initIndex('MyBlogIndex');
    </script>


    </body>
</html>
