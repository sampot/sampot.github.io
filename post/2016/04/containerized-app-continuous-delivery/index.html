
<!DOCTYPE html>
<html lang="zh-tw">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="我是山姆鍋">
    <title>容器化應用持續交付 - 我是山姆鍋</title>
    <meta name="author" content="Sampot (山姆鍋)">
    
    
        <link rel="icon" href="https://samkuo.me/images/favicon.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sampot (山姆鍋)","sameAs":["https://github.com/sampot","https://twitter.com/sampotkuo","https://facebook.com/sampotkuo","https://tw.linkedin.com/in/sampot","https://developers.tw/@山姆鍋","/sitemap/"],"image":"logo.png"},"articleBody":"\n\n自從山姆鍋決定採用容器化技術作為應用部署的方案後，很多的細節需要設計跟決定，為了避免太專注細節， 決定先設計出計畫採用的持續軟體交付流程。由於每個團隊的使用的工具跟系統可能差異很大， 為了讓本文可以適用其他團隊，先以抽象流程來描述然後才說明山姆鍋採用的方案。\n此流程在完成軟體持續整合、部署與交付所需要的支援。為了減低人為的錯誤以及強化軟體品質，軟體部署的流程需加以自動化且在其中加入自動功能測試的步驟。\n流程概觀\n整個流程故意以抽象的概念表示，並沒有提到具體使用的工具或系統，因為這些跟個別團隊有關。底下是流程步驟的簡短說明：\n\n開發人員提交程式碼到「源始碼儲存庫」後，「源始碼儲存庫」會透過 webhook 通知「持續整合系統 (CI)」有新的程式碼。\n「持續整合系統」會啟動並排程軟體建置任務來完成取出源始碼、編譯、單元測試、包裝與整合測試。\n「持續整合系統」將應用容器發佈到「容器映像儲存庫」。\n「持續整合系統」通知「部署機器人」有新的應用容器發佈。\n「部署機器人」會將發佈的應用容器自動部署到 「QA 環境」，容器映像是由部署環境直接由「容器映像儲存庫」下載到主機節點。\n\n有個系統沒有呈現在圖中，但卻扮演至關重要的角色：「群組訊息系統」，之所以沒有呈現出來是擔心圖形過於複雜，因為基本上，其它系統或工具都會跟它有互動。當「開發人員」將程式碼提交到「源始碼儲存庫」時，「源始碼儲存庫」便會通知相關群組此訊息，而「持續整合系統」在建置過程如有任何錯誤也會將此事件回報給相關群組成員，如果沒有問題則會通知容器發佈的消息。「自動部署機器人」會從「群組訊息系統」監聽容器發佈的消息，一旦有容器發佈會立刻自動將該容器部署到「QA 環境」。\n幾個特別注意的事項：\n\n目前部署到「生產環境」須由維運人員指示「自動部署機器人」來執行，但部署的動作仍舊是自動完成。\n容器映像的標籤 (tag)\n需要能夠讓開發人員很容易回推當初建置該映像 (image) 所使用的程式碼版本跟分支。\n根據部署環境的複雜度而定，「自動部署機器人」的功能也可以整合到「持續整合系統」中。\n\n了解了流程抽象概念後，後續小節說明具體使用的工具或系統。\n群組訊息系統\n這個系統是讓開發團隊內不同的群組 (groups) 可以即時的訊息溝通，而群組的成員並不限制只有人， 自動系統也會參與。因為需要整合自動化系統，使得常見的即時訊息服務，如 Line, QQ, Skype 等， 無法勝任這個角色。因此，有特別針對這個需要提供的雲端服務，目前主要的：Slack, HipChat, Gitter， 按照跟其它系統的整合支援度排序。\n許多人會選擇 Slack，但因為有整合的考量，本團隊選擇使用同樣由 Atlassian 公司提供的 HipChat 服務。 群組訊息系統可以說是團隊的神經系統，讓團隊可以更快有效地彼此同步訊息，這對於像本團隊一樣， 成員分散在不同地區與工作時間的團隊尤其重要。另外，我們也改用此系統做 Scrum 的 standup 會議， 當然實際形式上有所不同。\n源始碼管理系統\n以目前發展的態勢以及雲端服務的多寡來判斷，Git 作為源始碼管理系統的首選應該是大勢底定。 使用 Git 的主要原因：\n\n有成熟的雲端託管服務商 (GitHub, BitBucket, etc)。\n快速方便的源始碼分支 (branch) 與合併 (merge) 功能。\n可以離線提交 (commit)，避免一次性提交一大段難以理解的源始碼。\n除了中央源始碼儲存庫外，開發者的本機也是源始碼的完整備份。\n\n源始碼託管服務 / 源始碼儲存庫\n主要的雲端源始碼託管服務有: GitHub, BitBucket，因為整體考量，本團隊採用 BitBucket 作為源始碼託管服務供應商。 不管採用哪種源始碼管理系統，交付流程都需要有一個中央源始碼儲存庫來存放平台所有源始碼，自動建置系統會從此儲存庫取出並建置要部署的軟體元件。使用源始碼託管服務還有個好處，就是可以很好地支援 Pull request，讓 code review 的流程更順暢。\n容器映像儲存庫 (Image Repository)\n當採用以容器化 (containerized) 方式來發行軟體元件時，便需要一個容器映像儲存庫。此儲存庫， 顧名思義是用來存放打包好的應用程式或者服務模組。本團隊後端的服務或應用皆是以容器來包裝跟交付， 即使是前端開發人員，為了整合測試需要仍舊要對容器技術有基本的了解。目前雲端的容器映像儲存庫， 除了 Google Cloud Platform 跟 AWS 有提供外，另外兩個考慮的就是：\n\nDocker Hub\nQuay.io\n\n本團隊目前採用的是 Docker Hub，原因無他，只是比較習慣而已。但未來如果需要更好的團隊權限控管與 HipChat 更好的整合，會考慮轉換為 Quay.io。\n自動建置系統 / 持續整合系統\n自動建置系統會在開發者提交源始碼後，自動 check out 源始碼並編譯、測試並產生二元檔案或者映像檔。軟體的部署只能使用由建置系統所產生的二元檔案或者映像檔，不能直接連上服務器進行修改動作。每個應用 / 元件 / 模組在自動建置階段需按照順序完成下列階段才算成功：\n\n\n\n單元測試 (unit test)\n 元件需具備足夠的單元測試以確保功能正確並且避免 regression 的發生。每個語言的單元測試方法或框架也許不同，但基本概念是一樣的。\n\n\n\n\n元件包裝 (packaging)\n 經過單元測試後，元件需要包裝成可以發佈的二進位形式，以傳統 Java 應用為例，這可以是一個 Jar 或者 War 檔。以本團隊的作法，後端服務都是以 Docker 容器形式包裝。行動應用則是根據支援的平台有所不同，如 Android 的 apk 檔，iOS 的 ipa 檔。Webapp 則是以 tgz 格式發佈。\n\n\n\n\n整合測試 (integration test)\n 針對後端元件，整合測試需要在本地採用 docker-compose 部署一個測試環境後執行相關的自動測試。針對行動應用，這個階段需將應用發佈到「裝置測試系統」來以實際裝置執行自動測試。\n\n\n\n\n元件發佈 (release)\n 經過單元與整合測試後的元件，已經可以發佈。注意這裡「發佈」是指將包裝後的元件推送至「容器映像儲存庫」，並不表示發佈給終端用戶。\n\n\n\n\n元件部署 (deployment)\n 針對後端元件，「部署」代表將包裝好的元件上載到應用部署環境後設定並啟用。這裡的部署環境可能是開發或者 QA 環境。部署的方式是自動建置系統會向 “Operations” 這個 HipChat 聊天室發佈元件已經發佈的消息，然後部署機器人會接續後續部署工作。也就是說，部署的工作並不是整個在自動建置系統內完成。針對行動應用，「部署」意味著行動應用可以讓 QA 人員下載、安裝到手機或者平板來進行測試。針對這點，也有雲端服務來提供行動應用發佈以方便 QA 人員下載跟安裝。\n\n\n\n自動部署機器人 (DevOps Bot)\n由於本團隊採用 Kubernetes 作為應用部署平台，現有的「持續整合系統」對它的整合度不高， 加上考量到生產環境要支援人工審核部署的步驟，才有了這樣的設計。對於一般常見的部署環境， 自動部署也可以在「持續整合環境」中完成，不少服務也針對部署有特別的支援。 本團隊的「自動部署機器人」，英文叫 Sammy，中文叫「蝦米」，會監聽某個 HipChat 特定地聊天室 (Operations) 的訊息，「持續整合系統」在應用容器發佈成功後在此聊天室發佈訊息， Sammy 收到該訊息後便會自動進行部署。\n在 「QA 環境」測試過沒問題的版本，會由管理人員下指令給 Sammy 來部署到「生產環境」。 使用機器人有另一個好處：由於不是透過 Webhook 來取得通知，Sammy 可以部署在防火牆後，實際上 Sammy 同樣以容器形式被部署在應用平台中。除了第一次啟動 (bootstrap) 需要手動外， Sammy 也可以用來部署自己新的版本。\n應用部署平台 (Deployment Platform)\n這個平台主要是針對後端服務跟網站，容器化的應用元件在生產與 QA 環境的需要跟開發階段在本機以及自動建置環境不同。 應用部署平台提供應用的高可用性、擴充性以及其它非功能面的需求。目前團隊是採用 Kubernetes 來管理應用部署平台。\n在此部署平台可以同時有多個部署環境 (environments)，至少會有 QA 跟生產 (Production) 兩個環境。\n\nQA 環境：是用來驗證開發中的應用功能正確也用來驗證一些非功能需求。\n生產環境：應用的正式執行環境，支援應用的可用性、動態擴充、服務發現與負載均衡等。\n\n目前 「QA 環境」與「生產環境」共用同一組基礎設施 (infrastructure)，這樣做的幾個理由：\n\n管理彈性，主機節點可以在不同環境間挪用或共用。\n確保環境之間的相似性，不用因應不同環境有不同的部署方式。\n\n平台基礎設施 (infrastructure)\n「應用部署平台」提供應用的部署環境，但畢竟它是由軟體組成，最終還是需要伺服器來執行。 透過 Kubernetes 應用部署平台理論上可以採用不同的雲端基礎設施服務，但本團隊實際使用的是 AWS。 經過評估後，以 CoreOS 提供的虛擬機映像為基礎，實現 Kubernetes 需要的環境。 採用 CoreOS 的理由：\n\n需要方便可以在本地測試：需要的話，開發跟運營人員可以在本機複製一個叢集 (cluster) 環境來測試。\n有較多的文件跟支援：使用 Google Cloud Platform 的支援度最廣，但本團隊使用的是 AWS 。\n可以跨不同的基礎設施：實務上可能不會用到，但不被綁住在特定供應商總是一件好事。\n\n山姆鍋希望基礎設施可以類似 AWS CloudFormation 一樣可以自動建立，但又不想被綁定在 CloudFormation。 評估過 Ansible, SaltStack 這類組態管理工具後，發現 Terraform 比較適合這個工作，目前正在研究中。\n小結\n本文所提的流程是山姆鍋所屬團隊所採用，但仍在建置中的方案，目前主要是「自動部署機器人」跟「應用部署平台」 有技術上的瓶頸。要特別說明的是：本文假設採用微服務架構 (Microservices)， 每個應用容器都是可以獨立部署的單元，不管該容器是用來部署一個應用、微服務或者批次工作 (batch job)。","dateCreated":"2016-04-18T15:45:00+08:00","dateModified":"2020-05-04T06:00:22+08:00","datePublished":"2016-04-18T15:45:00+08:00","description":"自從山姆鍋決定採用容器化技術作為應用部署的方案後，很多的細節需要設計跟決定，為了避免太專注細節， 決定先設計出計畫採用的持續軟體交付流程。由於每個團隊的使用的工具跟系統可能差異很大， 為了讓本文可以適用其他團隊，先以抽象流程來描述然後才說明山姆鍋採用的方案。","headline":"容器化應用持續交付","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"},"publisher":{"@type":"Organization","name":"Sampot (山姆鍋)","sameAs":["https://github.com/sampot","https://twitter.com/sampotkuo","https://facebook.com/sampotkuo","https://tw.linkedin.com/in/sampot","https://developers.tw/@山姆鍋","/sitemap/"],"image":"logo.png","logo":{"@type":"ImageObject","url":"logo.png"}},"url":"https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/","keywords":"Continuous integration, Continuous delivery, Continuous deployment, container"}</script>
    <meta name="description" content="自從山姆鍋決定採用容器化技術作為應用部署的方案後，很多的細節需要設計跟決定，為了避免太專注細節， 決定先設計出計畫採用的持續軟體交付流程。由於每個團隊的使用的工具跟系統可能差異很大， 為了讓本文可以適用其他團隊，先以抽象流程來描述然後才說明山姆鍋採用的方案。">
<meta property="og:type" content="blog">
<meta property="og:title" content="容器化應用持續交付">
<meta property="og:url" content="https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/">
<meta property="og:site_name" content="我是山姆鍋">
<meta property="og:description" content="自從山姆鍋決定採用容器化技術作為應用部署的方案後，很多的細節需要設計跟決定，為了避免太專注細節， 決定先設計出計畫採用的持續軟體交付流程。由於每個團隊的使用的工具跟系統可能差異很大， 為了讓本文可以適用其他團隊，先以抽象流程來描述然後才說明山姆鍋採用的方案。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/continuous-delivery.jpg">
<meta property="article:published_time" content="2016-04-18T07:45:00.000Z">
<meta property="article:modified_time" content="2020-05-03T22:00:22.904Z">
<meta property="article:author" content="Sampot (山姆鍋)">
<meta property="article:tag" content="Continuous integration">
<meta property="article:tag" content="Continuous delivery">
<meta property="article:tag" content="Continuous deployment">
<meta property="article:tag" content="container">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/continuous-delivery.jpg">
<meta name="twitter:creator" content="@sampotkuo">
<meta property="fb:app_id" content="109832189371155">
    
    
        
    
    <meta property="og:image" content="https://samkuo.me/images/featured_image.jpg"/>
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-qlm634aeqqh4pedhidwvikqi59e0o7qckfid1geequyx9cyxw5rqjplgvt1t.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41152700-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-41152700-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
        <img class="header-avatar-picture" src="/images/logo32.png" alt="作者的圖片" />
            我是山姆鍋
        </a>
    </div>
    
        
            <a
                class="header-right-icon open-algolia-search"
                href="#search"
                aria-label="打開鏈接: /#search"
            >
        
        
            <i class="fa fa-search fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/images/logo.png" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Sampot (山姆鍋)</h4>
                
                    <h5 class="sidebar-profile-bio"><p>個人部落格， 記錄與分享一些軟體開發與運維相關資訊， 偶爾也會碎念一下</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about/"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/sampot"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/sampotkuo"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/sampotkuo"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://tw.linkedin.com/in/sampot"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://developers.tw/@山姆鍋"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="聯絡"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">聯絡</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/sitemap/"
                            
                            rel="noopener"
                            title="網站導覽"
                        >
                        <i class="sidebar-button-icon fa fa-sitemap" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">網站導覽</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            容器化應用持續交付
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2016-04-18T15:45:00+08:00">
	
		    4月 18, 2016
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="/category/service-operations/">Service Operations</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <div class="alert info no-icon">
                <a href="https://www.facebook.com/sampotkuo" target="_blank" rel="noopener">「我是山姆鍋」有臉書專頁</a>
            </div>

            <!-- excerpt -->
<div class="figure " style="width:;"><img class="fig-img" src="continuous-delivery.jpg" alt=""></div>
<p>自從山姆鍋決定採用容器化技術作為應用部署的方案後，很多的細節需要設計跟決定，為了避免太專注細節， 決定先設計出計畫採用的持續軟體交付流程。由於每個團隊的使用的工具跟系統可能差異很大， 為了讓本文可以適用其他團隊，先以抽象流程來描述然後才說明山姆鍋採用的方案。</p>
<p>此流程在完成軟體持續整合、部署與交付所需要的支援。為了減低人為的錯誤以及強化軟體品質，軟體部署的流程需加以自動化且在其中加入自動功能測試的步驟。</p>
<h2 id="流程概觀">流程概觀</h2>
<p>整個流程故意以抽象的概念表示，並沒有提到具體使用的工具或系統，因為這些跟個別團隊有關。底下是流程步驟的簡短說明：</p>
<ol>
<li>開發人員提交程式碼到「源始碼儲存庫」後，「源始碼儲存庫」會透過 webhook 通知「持續整合系統 (CI)」有新的程式碼。</li>
<li>「持續整合系統」會啟動並排程軟體建置任務來完成取出源始碼、編譯、單元測試、包裝與整合測試。</li>
<li>「持續整合系統」將應用容器發佈到「容器映像儲存庫」。</li>
<li>「持續整合系統」通知「部署機器人」有新的應用容器發佈。</li>
<li>「部署機器人」會將發佈的應用容器自動部署到 「QA 環境」，容器映像是由部署環境直接由「容器映像儲存庫」下載到主機節點。</li>
</ol>
<p>有個系統沒有呈現在圖中，但卻扮演至關重要的角色：「群組訊息系統」，之所以沒有呈現出來是擔心圖形過於複雜，因為基本上，其它系統或工具都會跟它有互動。當「開發人員」將程式碼提交到「源始碼儲存庫」時，「源始碼儲存庫」便會通知相關群組此訊息，而「持續整合系統」在建置過程如有任何錯誤也會將此事件回報給相關群組成員，如果沒有問題則會通知容器發佈的消息。「自動部署機器人」會從「群組訊息系統」監聽容器發佈的消息，一旦有容器發佈會立刻自動將該容器部署到「QA 環境」。</p>
<p>幾個特別注意的事項：</p>
<ul>
<li>目前部署到「生產環境」須由維運人員指示「自動部署機器人」來執行，但部署的動作仍舊是自動完成。</li>
<li>容器映像的標籤 (tag)<br>
需要能夠讓開發人員很容易回推當初建置該映像 (image) 所使用的程式碼版本跟分支。</li>
<li>根據部署環境的複雜度而定，「自動部署機器人」的功能也可以整合到「持續整合系統」中。</li>
</ul>
<p>了解了流程抽象概念後，後續小節說明具體使用的工具或系統。</p>
<h2 id="群組訊息系統">群組訊息系統</h2>
<p>這個系統是讓開發團隊內不同的群組 (groups) 可以即時的訊息溝通，而群組的成員並不限制只有人， 自動系統也會參與。因為需要整合自動化系統，使得常見的即時訊息服務，如 Line, QQ, Skype 等， 無法勝任這個角色。因此，有特別針對這個需要提供的雲端服務，目前主要的：Slack, HipChat, Gitter， 按照跟其它系統的整合支援度排序。</p>
<p>許多人會選擇 Slack，但因為有整合的考量，本團隊選擇使用同樣由 Atlassian 公司提供的 HipChat 服務。 群組訊息系統可以說是團隊的神經系統，讓團隊可以更快有效地彼此同步訊息，這對於像本團隊一樣， 成員分散在不同地區與工作時間的團隊尤其重要。另外，我們也改用此系統做 Scrum 的 standup 會議， 當然實際形式上有所不同。</p>
<h2 id="源始碼管理系統">源始碼管理系統</h2>
<p>以目前發展的態勢以及雲端服務的多寡來判斷，Git 作為源始碼管理系統的首選應該是大勢底定。 使用 Git 的主要原因：</p>
<ul>
<li>有成熟的雲端託管服務商 (GitHub, BitBucket, etc)。</li>
<li>快速方便的源始碼分支 (branch) 與合併 (merge) 功能。</li>
<li>可以離線提交 (commit)，避免一次性提交一大段難以理解的源始碼。</li>
<li>除了中央源始碼儲存庫外，開發者的本機也是源始碼的完整備份。</li>
</ul>
<h2 id="源始碼託管服務-源始碼儲存庫">源始碼託管服務 / 源始碼儲存庫</h2>
<p>主要的雲端源始碼託管服務有: GitHub, BitBucket，因為整體考量，本團隊採用 BitBucket 作為源始碼託管服務供應商。 不管採用哪種源始碼管理系統，交付流程都需要有一個中央源始碼儲存庫來存放平台所有源始碼，自動建置系統會從此儲存庫取出並建置要部署的軟體元件。使用源始碼託管服務還有個好處，就是可以很好地支援 Pull request，讓 code review 的流程更順暢。</p>
<h2 id="容器映像儲存庫-Image-Repository">容器映像儲存庫 (Image Repository)</h2>
<p>當採用以容器化 (containerized) 方式來發行軟體元件時，便需要一個容器映像儲存庫。此儲存庫， 顧名思義是用來存放打包好的應用程式或者服務模組。本團隊後端的服務或應用皆是以容器來包裝跟交付， 即使是前端開發人員，為了整合測試需要仍舊要對容器技術有基本的了解。目前雲端的容器映像儲存庫， 除了 Google Cloud Platform 跟 AWS 有提供外，另外兩個考慮的就是：</p>
<ul>
<li>Docker Hub</li>
<li><a href="http://Quay.io" target="_blank" rel="noopener">Quay.io</a></li>
</ul>
<p>本團隊目前採用的是 Docker Hub，原因無他，只是比較習慣而已。但未來如果需要更好的團隊權限控管與 HipChat 更好的整合，會考慮轉換為 <a href="http://Quay.io" target="_blank" rel="noopener">Quay.io</a>。</p>
<h2 id="自動建置系統-持續整合系統">自動建置系統 / 持續整合系統</h2>
<p>自動建置系統會在開發者提交源始碼後，自動 check out 源始碼並編譯、測試並產生二元檔案或者映像檔。軟體的部署只能使用由建置系統所產生的二元檔案或者映像檔，不能直接連上服務器進行修改動作。每個應用 / 元件 / 模組在自動建置階段需按照順序完成下列階段才算成功：</p>
<ol>
<li>
<dl>
<dt>單元測試 (unit test)</dt>
<dd> 元件需具備足夠的單元測試以確保功能正確並且避免 regression 的發生。每個語言的單元測試方法或框架也許不同，但基本概念是一樣的。</dd>
</dl>
</li>
<li>
<dl>
<dt>元件包裝 (packaging)</dt>
<dd> 經過單元測試後，元件需要包裝成可以發佈的二進位形式，以傳統 Java 應用為例，這可以是一個 Jar 或者 War 檔。以本團隊的作法，後端服務都是以 Docker 容器形式包裝。行動應用則是根據支援的平台有所不同，如 Android 的 apk 檔，iOS 的 ipa 檔。Webapp 則是以 tgz 格式發佈。</dd>
</dl>
</li>
<li>
<dl>
<dt>整合測試 (integration test)</dt>
<dd> 針對後端元件，整合測試需要在本地採用 docker-compose 部署一個測試環境後執行相關的自動測試。針對行動應用，這個階段需將應用發佈到「裝置測試系統」來以實際裝置執行自動測試。</dd>
</dl>
</li>
<li>
<dl>
<dt>元件發佈 (release)</dt>
<dd> 經過單元與整合測試後的元件，已經可以發佈。注意這裡「發佈」是指將包裝後的元件推送至「容器映像儲存庫」，並不表示發佈給終端用戶。</dd>
</dl>
</li>
<li>
<dl>
<dt>元件部署 (deployment)</dt>
<dd> 針對後端元件，「部署」代表將包裝好的元件上載到應用部署環境後設定並啟用。這裡的部署環境可能是開發或者 QA 環境。部署的方式是自動建置系統會向 “Operations” 這個 HipChat 聊天室發佈元件已經發佈的消息，然後部署機器人會接續後續部署工作。也就是說，部署的工作並不是整個在自動建置系統內完成。針對行動應用，「部署」意味著行動應用可以讓 QA 人員下載、安裝到手機或者平板來進行測試。針對這點，也有雲端服務來提供行動應用發佈以方便 QA 人員下載跟安裝。</dd>
</dl>
</li>
</ol>
<h2 id="自動部署機器人-DevOps-Bot">自動部署機器人 (DevOps Bot)</h2>
<p>由於本團隊採用 Kubernetes 作為應用部署平台，現有的「持續整合系統」對它的整合度不高， 加上考量到生產環境要支援人工審核部署的步驟，才有了這樣的設計。對於一般常見的部署環境， 自動部署也可以在「持續整合環境」中完成，不少服務也針對部署有特別的支援。 本團隊的「自動部署機器人」，英文叫 Sammy，中文叫「蝦米」，會監聽某個 HipChat 特定地聊天室 (Operations) 的訊息，「持續整合系統」在應用容器發佈成功後在此聊天室發佈訊息， Sammy 收到該訊息後便會自動進行部署。</p>
<p>在 「QA 環境」測試過沒問題的版本，會由管理人員下指令給 Sammy 來部署到「生產環境」。 使用機器人有另一個好處：由於不是透過 Webhook 來取得通知，Sammy 可以部署在防火牆後，實際上 Sammy 同樣以容器形式被部署在應用平台中。除了第一次啟動 (bootstrap) 需要手動外， Sammy 也可以用來部署自己新的版本。</p>
<h2 id="應用部署平台-Deployment-Platform">應用部署平台 (Deployment Platform)</h2>
<p>這個平台主要是針對後端服務跟網站，容器化的應用元件在生產與 QA 環境的需要跟開發階段在本機以及自動建置環境不同。 應用部署平台提供應用的高可用性、擴充性以及其它非功能面的需求。目前團隊是採用 Kubernetes 來管理應用部署平台。</p>
<p>在此部署平台可以同時有多個部署環境 (environments)，至少會有 QA 跟生產 (Production) 兩個環境。</p>
<ul>
<li>QA 環境：是用來驗證開發中的應用功能正確也用來驗證一些非功能需求。</li>
<li>生產環境：應用的正式執行環境，支援應用的可用性、動態擴充、服務發現與負載均衡等。</li>
</ul>
<p>目前 「QA 環境」與「生產環境」共用同一組基礎設施 (infrastructure)，這樣做的幾個理由：</p>
<ul>
<li>管理彈性，主機節點可以在不同環境間挪用或共用。</li>
<li>確保環境之間的相似性，不用因應不同環境有不同的部署方式。</li>
</ul>
<h2 id="平台基礎設施-infrastructure">平台基礎設施 (infrastructure)</h2>
<p>「應用部署平台」提供應用的部署環境，但畢竟它是由軟體組成，最終還是需要伺服器來執行。 透過 Kubernetes 應用部署平台理論上可以採用不同的雲端基礎設施服務，但本團隊實際使用的是 AWS。 經過評估後，以 CoreOS 提供的虛擬機映像為基礎，實現 Kubernetes 需要的環境。 採用 CoreOS 的理由：</p>
<ul>
<li>需要方便可以在本地測試：需要的話，開發跟運營人員可以在本機複製一個叢集 (cluster) 環境來測試。</li>
<li>有較多的文件跟支援：使用 Google Cloud Platform 的支援度最廣，但本團隊使用的是 AWS 。</li>
<li>可以跨不同的基礎設施：實務上可能不會用到，但不被綁住在特定供應商總是一件好事。</li>
</ul>
<p>山姆鍋希望基礎設施可以類似 AWS CloudFormation 一樣可以自動建立，但又不想被綁定在 CloudFormation。 評估過 Ansible, SaltStack 這類組態管理工具後，發現 Terraform 比較適合這個工作，目前正在研究中。</p>
<h2 id="小結">小結</h2>
<p>本文所提的流程是山姆鍋所屬團隊所採用，但仍在建置中的方案，目前主要是「自動部署機器人」跟「應用部署平台」 有技術上的瓶頸。要特別說明的是：本文假設採用微服務架構 (Microservices)， 每個應用容器都是可以獨立部署的單元，不管該容器是用來部署一個應用、微服務或者批次工作 (batch job)。</p>
            <div class="alert info no-icon">
                山姆鍋是<a href="https://developers.tw/@山姆鍋" target="_blank" rel="noopener">#呆丸開發者</a>成員
            </div>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">標籤</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tag/continuous-delivery/" rel="tag">Continuous delivery</a> <a class="tag tag--primary tag--small t-link" href="/tag/continuous-deployment/" rel="tag">Continuous deployment</a> <a class="tag tag--primary tag--small t-link" href="/tag/continuous-integration/" rel="tag">Continuous integration</a> <a class="tag tag--primary tag--small t-link" href="/tag/container/" rel="tag">container</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2018/08/use-hexo-for-blog/"
                    data-tooltip="改用 Hexo 寫部落格文章"
                    aria-label="上一篇: 改用 Hexo 寫部落格文章"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2016/04/shippable-ci-docker-compose/"
                    data-tooltip="Shippable CI 上 Docker-compose 的難題"
                    aria-label="下一篇: Shippable CI 上 Docker-compose 的難題"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Sampot (山姆鍋). All Rights Reserved.
    </span>
    <br/>
        <a rel="license"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW"><img
                alt="創用 CC 授權條款" style="border-width:0"
                src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
        除另有標示，本著作係採用<a rel="license"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW">創用 CC
            姓名標示-非商業性-相同方式分享 4.0 國際 授權條款</a>授權。
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2018/08/use-hexo-for-blog/"
                    data-tooltip="改用 Hexo 寫部落格文章"
                    aria-label="上一篇: 改用 Hexo 寫部落格文章"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/post/2016/04/shippable-ci-docker-compose/"
                    data-tooltip="Shippable CI 上 Docker-compose 的難題"
                    aria-label="下一篇: Shippable CI 上 Docker-compose 的難題"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/images/logo.png" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Sampot (山姆鍋)</h4>
        
            <div id="about-card-bio"><p>個人部落格， 記錄與分享一些軟體開發與運維相關資訊， 偶爾也會碎念一下</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>IT 自由工作者</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                台灣/台北
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="/assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/03/set-up-mysql-master-master-replication/"
                            aria-label=": 設定 MySQL Master-Master 複製"
                        >
                            <h3 class="media-heading">設定 MySQL Master-Master 複製</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年3月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>本文簡單說明如何設定兩台 MySQL server，讓它們彼此互相備份資料 (Master-master 模式)。雖然這樣的設定通常是支援高可用性 (high availability) 平台的一部分，但本文不包含如何完成其他 HA 的工作。設定兩台 MySQL 伺服器互相備份，主要目的就是要確認資料的安全性；同時也提高可用性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/use-pacemaker-two-node-ha-cluster/"
                            aria-label=": 使用 Pacemaker 建構雙節點叢集系統"
                        >
                            <h3 class="media-heading">使用 Pacemaker 建構雙節點叢集系統</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月6日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>想要達到系統高可用性 (high availability) 的需求，自然免不了需要採用現成的解決方案。本文說明如何利用 Pacemaker/heartbeat 來建構一個雙節點的從其系統。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/build-cluster-filesystem-with-glusterfs-ubuntu/"
                            aria-label=": 使用 GlusterFS 在 Ubuntu 上建構雙節點叢集檔案系統"
                        >
                            <h3 class="media-heading">使用 GlusterFS 在 Ubuntu 上建構雙節點叢集檔案系統</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>在網站的叢集系統中，除了資料庫需要讓各個伺服器存取外，常常也會需要讓檔案 (圖檔，CSS 等等) 可以被叢集中的伺服器存取。 傳統上，常常使用 NFS 伺服器來達到此目的，但 NFS 本身往往成為單一失敗點 (single point of failure)。 本文介紹 GlusterFS 來建構一個簡單的雙節點叢集檔案系統，具備高可用性、高擴充性等特性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/scale-wordpress-with-hyperdb/"
                            aria-label=": 使用 HyperDB 加強 WordPress 網站的資料庫擴充性"
                        >
                            <h3 class="media-heading">使用 HyperDB 加強 WordPress 網站的資料庫擴充性</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>對於流量高的 Wordpress 網站來說，資料庫往往是第一個出現的瓶頸。針對資料庫擴充性的問題，本文介紹 HyperDB 這個解決方案。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/04/create-lnmp-environment-with-nginx/"
                            aria-label=": 在 Linode 上使用 Nginx 架設 LNMP 環境"
                        >
                            <h3 class="media-heading">在 Linode 上使用 Nginx 架設 LNMP 環境</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年4月30日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Apache HTTPd 是很好的網站伺服器，但是對於 CPU 跟記憶體的要求較高，對於架設在 VPS 上面網站來說， 需要一個更輕量級的解決方案。越來越多人選擇使用 Nginx 架設網站，主要考量便是它的快速、穩定以及輕量的特性。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2012/05/support-sending-mail-php-linux-vps-exim/"
                            aria-label=": Linux VPS PHP 網站可以發送信件"
                        >
                            <h3 class="media-heading">Linux VPS PHP 網站可以發送信件</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2012年5月8日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>PHP 架站軟體通常需要用到寄信功能，例如：通知站長有新的迴響需要審核。使用虛擬主機來架站的讀者一定會納悶：<br>
不管是 WordPress，Drupal 或者其他 PHP<br>
架站軟體不是都不用另外設定就可以寄信？為什麼需要特地提到這件事情。<br>
話說山姆鍋的主機採用的是 Linode VPS，很多事情都需要自己來，唉！<br>
如果您的網站主機跟山姆鍋一樣是 VPS 或者專屬伺服器，那這篇文章也許對您有幫助。<br>
由於不是要做為公司的郵件伺服器，山姆鍋希望除了讓 PHP 架站軟體送信外，不再作其它用途。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/04/start-up/"
                            aria-label=": 影化身科技有限公司成立"
                        >
                            <h3 class="media-heading">影化身科技有限公司成立</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>2013 年 4 月 24 日，影化身科技有限公司登記成立，致力於提供雲端服務平台。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/shi-yong-octopresszuo-wei-bo-ke-ping-tai/"
                            aria-label=": 使用 Octopress 作為部落格平台"
                        >
                            <h3 class="media-heading">使用 Octopress 作為部落格平台</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>由於沒有需要太多動態功能，所以，嘗試使用靜態部落格平台 Octopress 來寫文章。「艾米部落」<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> 一路從 Joomla, Drupal, WordPress 到現在的 Octopress，也算是換了不少平台。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/use-static-site-generator-for-company-site/"
                            aria-label=": 使用靜態網頁產生器來管理公司網站"
                        >
                            <h3 class="media-heading">使用靜態網頁產生器來管理公司網站</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>對於不需要動態功能的網站而言，使用像是 Drupal、WordPress 之類的架站軟體，感覺有點大材小用。對於可以接受不使用「所見即所得」編輯器的人，靜態網站產生器應該是個可以接受的方案。 雖說是靜態網站，缺少很多功能，但像是公司或者行銷網站往往也不需要這些。況且， 靜態網站有諸多動態網站所沒有的功能，如：</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://samkuo.me/post/2013/05/exchange-name-card-with-eavatar-me/"
                            aria-label=": 如何利用「我．影化身」服務交換名片"
                        >
                            <h3 class="media-heading">如何利用「我．影化身」服務交換名片</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月29日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>今天從 MR JAMIE 上讀到一篇文章：「從今天開始，請 email 你的名片給我吧！」這讓我想到，與其使用 Email，使用「我．影化身」來代替，不是也很適當？</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 125 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-kkzt2vzfxsb5bych7gew3tzpzddvyjfn0sutkf3vixujdxhpjr4ifnekp3si.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://samkuo.me/post/2016/04/containerized-app-continuous-delivery/';
              
            this.page.identifier = 'post/2016/04/containerized-app-continuous-delivery/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'sampotkuo';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    



    
<script src="/assets/js/moment-with-locales.js"></script>

    
<script src="/assets/js/algoliasearch.js"></script>

    <script>
      var algoliaClient = algoliasearch('OIWK4CBFS4', 'f676051199368fe5f161c9012b7edaf6');
      var algoliaIndex = algoliaClient.initIndex('MyBlogIndex');
    </script>


    </body>
</html>
